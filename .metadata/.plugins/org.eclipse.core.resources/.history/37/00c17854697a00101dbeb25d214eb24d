package com.example.tasks;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;

import java.time.Duration;
import java.util.List;

public class MultiSelectDropdownDemo {

    public static void main(String[] args) {

        // 1️⃣ Set the correct path to your chromedriver
        System.setProperty("webdriver.chrome.driver", "C:\\drivers\\chromedriver.exe"); // <- Update this path

        // 2️⃣ Initialize ChromeDriver
        WebDriver driver = new ChromeDriver();

        try {
            // 3️⃣ Open the website with multi-select dropdown
            driver.get("https://demoqa.com/select-menu"); // Example URL, change if needed
            driver.manage().window().maximize();

            // 4️⃣ Wait utility
            WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));

            // 5️⃣ Click the multi-select dropdown to open options
            WebElement multiSelect = wait.until(ExpectedConditions.elementToBeClickable(
                    By.xpath("//div[@id='selectMenuContainer']//div[contains(@class,'css-1hwfws3')]")));
            multiSelect.click();

            // 6️⃣ Select multiple options (example: Green and Blue)
            List<String> colorsToSelect = List.of("Green", "Blue");

            for (String color : colorsToSelect) {
                WebElement option = wait.until(ExpectedConditions.elementToBeClickable(
                        By.xpath("//div[contains(@class,'css-11unzgr')]//div[text()='" + color + "']")));
                option.click();
            }

            // 7️⃣ Validation: print selected values
            WebElement selectedValues = driver.findElement(By.xpath("//div[@id='selectMenuContainer']//div[contains(@class,'css-1rhbuit-multiValue')]"));
            System.out.println("✅ Selected values: " + selectedValues.getText());

        } catch (Exception e) {
            System.out.println("❌ Validation failed!");
            e.printStackTrace();
        } finally {
            // 8️⃣ Close the browser
            driver.quit();
        }
    }
}
